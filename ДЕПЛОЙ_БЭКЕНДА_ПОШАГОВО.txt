╔══════════════════════════════════════════════════════════════╗
║     ДЕПЛОЙ БЭКЕНДА НА RAILWAY ИЛИ RENDER                     ║
╚══════════════════════════════════════════════════════════════╝

🎯 ЦЕЛЬ: Задеплоить бэкенд, чтобы публикация новостей работала

═══════════════════════════════════════════════════════════════

📋 ВАРИАНТ 1: RAILWAY (РЕКОМЕНДУЕТСЯ) ⚡

═══════════════════════════════════════════════════════════════

ШАГ 1: Регистрация
──────────────────
1. Откройте: https://railway.app
2. Нажмите: "Start a New Project"
3. Выберите: "Deploy from GitHub repo"
4. Войдите через GitHub

ШАГ 2: Выбор репозитория
────────────────────────
1. Найдите: "astrotop.pro" (Kristalrgb/astrotop.pro)
2. Нажмите: "Deploy Now"

ШАГ 3: Настройка
────────────────
1. Нажмите на сервис (обычно "astrotop.pro")
2. Откройте: "Settings"
3. Прокрутите до: "Build & Deploy Settings"

   Установите:
   • Root Directory: server
   • Build Command: npm install
   • Start Command: npm start

4. Нажмите: "Save"

ШАГ 4: Переменные окружения
────────────────────────────
В "Settings" → "Variables":

1. Нажмите: "New Variable"
2. Добавьте:
   • Name: FRONTEND_URL
   • Value: https://astrotoppro.vercel.app
3. Нажмите: "Add"

ШАГ 5: Получение URL
────────────────────
1. Откройте: "Deployments"
2. Дождитесь зеленой галочки ✅
3. Откройте: "Settings" → "Networking"
4. Нажмите: "Generate Domain"
5. СКОПИРУЙТЕ URL (например: xxx.up.railway.app)

ШАГ 6: Обновление Vercel
─────────────────────────
1. Откройте: https://vercel.com/dashboard
2. Найдите проект "astrotop.pro"
3. Откройте: "Settings" → "Environment Variables"
4. Добавьте две переменные:

   Переменная 1:
   • Name: VITE_API_URL
   • Value: https://ваш-бэкенд.railway.app
   • Environment: ✅ Production ✅ Preview ✅ Development

   Переменная 2:
   • Name: VITE_SOCKET_URL
   • Value: https://ваш-бэкенд.railway.app
   • Environment: ✅ Production ✅ Preview ✅ Development

5. Нажмите: "Save"

ШАГ 7: Пересборка фронтенда
────────────────────────────
1. Откройте: "Deployments"
2. Нажмите "..." на последнем деплое
3. Выберите: "Redeploy"
4. Дождитесь завершения (1-2 минуты)

✅ ГОТОВО! Проверьте публикацию новости на сайте.

═══════════════════════════════════════════════════════════════

📋 ВАРИАНТ 2: RENDER 🎨

═══════════════════════════════════════════════════════════════

ШАГ 1: Регистрация
──────────────────
1. Откройте: https://render.com
2. Нажмите: "Get Started for Free"
3. Выберите: "Sign up with GitHub"

ШАГ 2: Создание Web Service
────────────────────────────
1. Нажмите: "New +" → "Web Service"
2. Найдите: "astrotop.pro"
3. Нажмите: "Connect"

ШАГ 3: Настройка
────────────────
Заполните:

• Name: astrotop-backend
• Region: Frankfurt (EU) или Oregon (US)
• Branch: main
• Root Directory: server
• Runtime: Node
• Build Command: npm install
• Start Command: npm start
• Plan: Free

ШАГ 4: Переменные окружения
────────────────────────────
Прокрутите до "Environment Variables":

1. Нажмите: "Add Environment Variable"
2. Добавьте:
   • Key: FRONTEND_URL
   • Value: https://astrotoppro.vercel.app
3. Нажмите: "Create Web Service"

ШАГ 5: Получение URL
────────────────────
1. Дождитесь завершения деплоя (2-5 минут)
2. Скопируйте URL (например: xxx.onrender.com)

⚠️ На Render сервис "засыпает" через 15 минут неактивности.
   Первый запрос после пробуждения займет 30-50 секунд.

ШАГ 6-7: Обновление Vercel
───────────────────────────
(Такие же, как в Railway, но используйте Render URL)

═══════════════════════════════════════════════════════════════

🔍 ПРОВЕРКА РАБОТЫ

═══════════════════════════════════════════════════════════════

1. Откройте URL бэкенда в браузере
   Пример: https://ваш-бэкенд.railway.app/api/news
   
   Должен вернуться JSON: []

2. Откройте сайт на Vercel

3. Зайдите в кабинет астролога

4. Попробуйте опубликовать новость

5. Если работает без ошибок — ВСЁ ГОТОВО! ✅

═══════════════════════════════════════════════════════════════

❓ ЕСЛИ ЧТО-ТО НЕ РАБОТАЕТ

═══════════════════════════════════════════════════════════════

Проблема: "Сервер недоступен"
→ Проверьте, что бэкенд запущен
→ Проверьте переменные окружения в Vercel
→ Убедитесь, что проект пересобран

Проблема: CORS ошибка
→ Проверьте FRONTEND_URL в настройках бэкенда
→ Убедитесь, что домен Vercel добавлен

Проблема: 404 Not Found
→ Проверьте правильность URL бэкенда
→ Убедитесь, что нет лишних пробелов

═══════════════════════════════════════════════════════════════

📚 ПОДРОБНЫЕ ИНСТРУКЦИИ

═══════════════════════════════════════════════════════════════

• Railway: ДЕПЛОЙ_БЭКЕНДА_RAILWAY.md
• Render: ДЕПЛОЙ_БЭКЕНДА_RENDER.md
• Обновление Vercel: ОБНОВЛЕНИЕ_ВЕРСЕЛЬ.md

═══════════════════════════════════════════════════════════════

🎉 УДАЧИ!

═══════════════════════════════════════════════════════════════




